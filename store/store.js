import UrunBilgi from '@/UrunBilgi'

export const state = () => ({
    Urunler:[
    {
        id:0,
        url:'https://www.cilekbutik.net/cdn/1/300/500/images/urunler/5fa57c217b440-1353.jpg',
        name:'Lakers Sweat',
        fiyat:55.00,
        url2:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a282db005-1368.jpg',
        barkod:"6242005630101",
        kategori:"Ceket",
        bedenler:[{ad:'S'},{ad:'M'},{ad:'L'}],
        beden:'M',
        renk:'TURUNCU',
        tutar:55.00,
        adet:10,
    },
    {
        id:1,
        url:'https://www.cilekbutik.net/cdn/1/300/500/images/urunler/5fa57c217b440-1353.jpg',
        name:'asd',
        fiyat:23,
        url2:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a282db005-1368.jpg',
        barkod:"6242005630101",
        kategori:"Ceket",
        bedenler:[{ad:'S'},{ad:'M'},{ad:'L'}],
        beden:'M',
        renk:'TURUNCU',
        tutar:55.00,
        adet:10,

    },
    {
        id:2,
        url:'https://www.cilekbutik.net/cdn/1/300/500/images/urunler/5fa57c217b440-1353.jpg',
        name:'Lakers Sweat',
        fiyat:55.00,
        url2:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a282db005-1368.jpg',
        barkod:"6242005630101",
        kategori:"Ceket",
        bedenler:[{ad:'S'},{ad:'M'},{ad:'L'}],
        beden:'M',
        renk:'TURUNCU',
        tutar:55.00,
        adet:10,

    },
    {
        id:3,
        url:'https://www.cilekbutik.net/cdn/1/300/500/images/urunler/5fa57c217b440-1353.jpg',
        name:'Lakers Sweat',
        fiyat:55.00,
        url2:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a282db005-1368.jpg',
        barkod:"6242005630101",
        kategori:"Ceket",
        bedenler:[{ad:'S'},{ad:'M'},{ad:'L'}],
        beden:'M',
        renk:'TURUNCU',
        tutar:55.00,
        adet:10,

    },
    {
        id:4,
        url:'https://www.cilekbutik.net/cdn/1/300/500/images/urunler/5fa57c217b440-1353.jpg',
        name:'Lakers Sweat',
        fiyat:55.00,
        url2:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a282db005-1368.jpg',
        barkod:"6242005630101",
        kategori:"Ceket",
        bedenler:[{ad:'S'},{ad:'M'},{ad:'L'}],
        beden:'M',
        renk:'TURUNCU',
        tutar:55.00,
        adet:10,

    },
    {
        id:5,
        url:'https://www.cilekbutik.net/cdn/1/300/500/images/urunler/5fa57c217b440-1353.jpg',
        name:'Lakers Sweat',
        fiyat:55.00,
        url2:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a282db005-1368.jpg',
        barkod:"6242005630101",
        kategori:"Ceket",
        bedenler:[{ad:'S'},{ad:'M'},{ad:'L'}],
        beden:'M',
        renk:'TURUNCU',
        tutar:55.00,
        adet:10,

    },
    {
        id:6,
        url:'https://www.cilekbutik.net/cdn/1/300/500/images/urunler/5fa57c217b440-1353.jpg',
        name:'Lakers Sweat',
        fiyat:55.00,
        url2:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a282db005-1368.jpg',
        barkod:"6242005630101",
        kategori:"Ceket",
        bedenler:[{ad:'S'},{ad:'M'},{ad:'L'}],
        beden:'M',
        renk:'TURUNCU',
        tutar:55.00,
        adet:10,

    },
    {
        id:7,
        url:'https://www.cilekbutik.net/cdn/1/300/500/images/urunler/5fa57c217b440-1353.jpg',
        name:'Lakers Sweat',
        fiyat:55.00,
        url2:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a282db005-1368.jpg',
        barkod:"6242005630101",
        kategori:"Ceket",
        bedenler:[{ad:'S'},{ad:'M'},{ad:'L'}],
        beden:'M',
        renk:'TURUNCU',
        tutar:55.00,
        adet:10,

    },
    {
        id:8,
        url:'https://www.cilekbutik.net/cdn/1/300/500/images/urunler/5fa57c217b440-1353.jpg',
        name:'Lakers Sweat',
        fiyat:55.00,
        url2:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a282db005-1368.jpg',
        barkod:"6242005630101",
        kategori:"Ceket",
        bedenler:[{ad:'S'},{ad:'M'},{ad:'L'}],
        beden:'M',
        renk:'TURUNCU',
        tutar:55.00,
        adet:10,

    },
    {
        id:9,
        url:'https://www.cilekbutik.net/cdn/1/300/500/images/urunler/5fa57c217b440-1353.jpg',
        name:'Lakers Sweat',
        fiyat:55.00,
        url2:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a282db005-1368.jpg',
        barkod:"6242005630101",
        kategori:"Ceket",
        bedenler:[{ad:'S'},{ad:'M'},{ad:'L'}],
        beden:'M',
        renk:'TURUNCU',
        tutar:55.00,
        adet:10,

    },
    {
        id:10,
        url:'https://www.cilekbutik.net/cdn/1/300/500/images/urunler/5fa57c217b440-1353.jpg',
        name:'Lakers Sweat',
        fiyat:55.00,
        url2:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a282db005-1368.jpg',
        barkod:"6242005630101",
        kategori:"Ceket",
        bedenler:[{ad:'S'},{ad:'M'},{ad:'L'}],
        beden:'M',
        renk:'TURUNCU',
        tutar:55.00,
        adet:10,

    },
    {
        id:11,
        url:'https://www.cilekbutik.net/cdn/1/300/500/images/urunler/5fa57c217b440-1353.jpg',
        name:'Lakers Sweat',
        fiyat:55.00,
        url2:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a282db005-1368.jpg',
        barkod:"6242005630101",
        kategori:"Ceket",
        bedenler:[{ad:'S'},{ad:'M'},{ad:'L'}],
        beden:'M',
        renk:'TURUNCU',
        tutar:55.00,
        adet:10,

    },
    {
        id:12,
        url:'https://www.cilekbutik.net/cdn/1/300/500/images/urunler/5fa57c217b440-1353.jpg',
        name:'Lakers Sweat',
        fiyat:55.00,
        url2:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a282db005-1368.jpg',
        barkod:"6242005630101",
        kategori:"Ceket",
        bedenler:[{ad:'S'},{ad:'M'},{ad:'L'}],
        beden:'M',
        renk:'TURUNCU',
        tutar:55.00,
        adet:10,

    },
    {
        id:13,
        url:'https://www.cilekbutik.net/cdn/1/300/500/images/urunler/5fa6a45571d00-1373.jpg',
        name:'Lakers Sweat',
        fiyat:55.00,
        url2:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a282db005-1368.jpg',
        barkod:"6242005630101",
        kategori:"Ceket",
        bedenler:[{ad:'S'},{ad:'M'},{ad:'L'}],
        beden:'M',
        renk:'TURUNCU',
        tutar:55.00,
        adet:10,

    },
    {
        id:14,
        url:'https://www.cilekbutik.net/cdn/1/300/500/images/urunler/5fa6a45571d00-1373.jpg',
        name:'Lakers Sweat',
        fiyat:55.00,
        url2:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a282db005-1368.jpg',
        barkod:"6242005630101",
        kategori:"Ceket",
        bedenler:[{ad:'S'},{ad:'M'},{ad:'L'}],
        beden:'M',
        renk:'TURUNCU',
        tutar:55.00,
        adet:10,

    },
],
    Sepet:[
        {
            id:0,
            url:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a3f956175-1372.jpg',
            name:'Lakers Sweat',
            beden:'M',
            renk:'TURUNCU',
            fiyat:55.00,
            counter:1,
            tutar:55.00
        },
        {
            id:1,
            url:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa57bd2c7259-1351.jpg',
            name:'PANTOLON',
            beden:'S',
            renk:'SİYAH',
            counter:1,
            fiyat:55.00,
            tutar:55.00
        },  
        {
            id:2,
            url:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a3f956175-1372.jpg',
            name:'Lakers Sweat',
            beden:'M',
            renk:'TURUNCU',
            counter:1,
            fiyat:55.00,
            tutar:55.00
        },  
        {
            id:3,
            url:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a3f956175-1372.jpg',
            name:'Lakers Sweat',
            beden:'M',
            renk:'TURUNCU',
            counter:1,
            fiyat:55.00,
            tutar:55.00
        },  
        {
            id:4,
            url:'https://www.cilekbutik.net/cdn/2/100/100/images/urunler/5fa6a3f956175-1372.jpg',
            name:'Lakers Sweat',
            beden:'26',
            renk:'TURUNCU',
            counter:1,
            fiyat:55.00,
            tutar:55.00
        },    
    ],
})

export const getters = () => ({
    StoktakiUrunler (state, getters) {
        return state.Urunler.filter(Urun => Urun.adet > 0)
    },

    SepetUrunleri (state) {
        return state.Sepet.map(SepetUrunu => {
          const Urun = state.Urunler.find(Urun => Urun.id === SepetUrunu.id)
          return {
            name: Urun.name,
            fiyat: Urun.fiyat,
            renk: Urun.renk,
            beden: Urun.beden,
            tutar: Urun.tutar,
            adet: SepetUrunu.adet
          }
        })
      },

    SepetToplam (state, getters) {
        return getters.SepetÜrünleri.reduce((toplam, Urun) => toplam + Urun.fiyat * Urun.adet, 0)
    },

    StoktaVarMı(){
      return (Urun) => {
        return Urun.adet > 0
      }
    }
})

export const actions = () => ({
    Urunlerfetch ({commit}) {
        return new Promise((resolve, reject) => {
          UrunBilgi.getUrunler(Urunler => {
            commit('setUrunler', Urunler)
            resolve()
          })
        })
      },
  
      SepeteEkle ({state, getters, commit}, Urun) {
        if (getters.StoktaVarMı(Urun)) {
          const SepetUrunu = state.Sepet.find(item => item.id === Urun.id)
          if (!SepetUrunu) {
            commit('SepetDizisineEkle', Urun.id)
          } else {
            commit('AdetiArttır', SepetUrunu)
          }
          commit('AdetiAzalt', Urun)
        }
      },
})

export const mutations = () => ({
    setUrunler (state, Urunler) {
        state.Urunler = Urunler
      },
  
      SepetDizisineEkle (state, UrunId) {
        state.Sepet.push({
          id: UrunId,
          adet: 1
        })
      },
  
      AdetiArttır (state, SepetUrunu) {
        SepetUrunu.adet++
      },
  
      AdetiAzalt (state, Urun) {
        Urun.adet--
      },
  
      SepetBoşaltma (state) {
        state.Sepet = []
      }
})